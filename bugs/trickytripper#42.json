{
    "apk_name": "trickytripper_v1.6.0.apk",
    "url": "https://github.com/koelleChristian/trickytripper/issues/42",
    "repo": "trickytripper",
    "title": "NPE on create payment",
    "body": "Steps to reproduce:\r\n\r\ncreate a trip -> long click the trip -> swipe the tab from \"Travelers\" to \"Report\", and click menu option \"create payment\"\r\n\r\nException trace:\r\n```\r\njava.lang.NullPointerException: Attempt to invoke virtual method 'android.app.Application android.support.v4.app.FragmentActivity.getApplication()' on a null object reference\r\n        at de.koelle.christian.trickytripper.activities.a.c(ParticipantTabActivity.java:96)\r\n        at de.koelle.christian.trickytripper.activities.a.a(ParticipantTabActivity.java:36)\r\n        at de.koelle.christian.trickytripper.activities.a$b.a(ParticipantTabActivity.java:154)\r\n        at android.support.v7.app.AppCompatDelegateImplV9$b.a(AppCompatDelegateImplV9.java:1790)\r\n        at android.support.v7.app.q$a.a(WindowDecorActionBar.java:1101)\r\n        at android.support.v7.view.menu.h.a(MenuBuilder.java:817)\r\n        at android.support.v7.view.menu.j.b(MenuItemImpl.java:156)\r\n        at android.support.v7.view.menu.h.a(MenuBuilder.java:964)\r\n        at android.support.v7.view.menu.m.onItemClick(MenuPopup.java:127)\r\n        at android.widget.AdapterView.performItemClick(AdapterView.java:310)\r\n        at android.widget.AbsListView.performItemClick(AbsListView.java:1145)\r\n        at android.widget.AbsListView$PerformClick.run(AbsListView.java:3042)\r\n        at android.widget.AbsListView$3.run(AbsListView.java:3879)\r\n        at android.os.Handler.handleCallback(Handler.java:739)\r\n        at android.os.Handler.dispatchMessage(Handler.java:95)\r\n        at android.os.Looper.loop(Looper.java:148)\r\n        at android.app.ActivityThread.main(ActivityThread.java:5417)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\r\n```\r\nApp Version: 1.5.8\r\n\r\nDevice: Android 6.0 emulator\r\n\r\n",
    "comments": [
        "Sorry for the inconveniences. \r\n\r\n1. Right now version 1.6.0 is the latest version. Please update to 1.6.0. There should be no risk, as nothing has been changed on the internal database for a very long time. If you don't have access to the store, use [this link](https://github.com/koelleChristian/trickytripper/tree/master/releases/181001_1_6_0_V23)\r\n1. I cannot reproduce the error with your description. \r\n   1. I create a new trip\r\n   1. If I long tap on the trip -> I am in the edit dialog of the trip I cannot swipe and I cannot create payments\r\n   1. if I select the trip I have no travelers, so I should not be able to create payments but I can swipe to Report\r\n   1. When I am on the main swipe screen within a trip, i.e. the \"Report\"-Tab, there is no menu to create payments\r\n   1. The only menu option to create a payment is when you long tap on a existing traveler. If I use this menu option on a Android Emulator 23 rev. 3 aka Android Marshmallow aka Android 6, I do not get this error but get the create payment dialog displayed.\r\n\r\nSo far, so good. This might be fixed due to an underlying update of the support library.\r\nWithout further feedback, I will consider this as 'fixed'.\r\n",
        "Thanks for your inspection, Christian. Maybe I have not stated the reproduction steps very clearly.\r\n\r\nThe STR is: start the fresh app -> create a traveler (e.g., named \"Ting\") -> long press on the traveler \"Ting\" ->  swipe from the tab \"Travelers\"  to \"Report\" -> click the menu option -> choose \"Create payment\". The app crashes.\r\n\r\nI reproduced on the latest version 1.6.0 on Android 6.0 emulator. \r\n\r\n![image](https://user-images.githubusercontent.com/3156978/49682445-6b5a2e00-faef-11e8-8458-080b94d1fd27.png)\r\n\r\nI guess this crash is due to the switches between different fragments?",
        "Any update? ",
        "IMHO, when the user swipes from \"Travelers\" to \"Report\", the tab \"Travelers\" becomes invisible, and the fragment \"ParticipantTabActivity\" will be recycled and detached from its associated main activity (i.e., \"TrickyTripperActivity\"). At this time, since the menu options are not changed, if the user selects the option \"create payment\", the code will call getActivity() in the fragment \"ParticipantTabActivity\", which will return null, and crashes the app. Hope this could be useful to fix the issue.",
        "I will try to take a look at this this week. Sorry for the delay.",
        "Thanks, Christian. Let me know if you need more help :)",
        "Can be reproduced thanks for your support.\r\n\r\nAs far as I remember, i could not switch tabs whilst option menu activated.\r\n\r\nThe problem can be fixed by switching from FragmentStatePagerAdapter to FragementPagerAdapter.\r\nAlternatives:\r\n\r\n- Close the options menu bar on tab-swipe.\r\n- Disable tab-swipe when options menu bar open"
    ]
}